<div class="row mb-4 align-items-center">
    <div class="col-md-6">
        <h1 class="h3 mb-0 text-primary">
            <i class="bi bi-shield-lock">
                
            </i>
            Gestión de Usuarios
        </h1>
        <small class="text-muted">Administración y clasificación de Usuarios para el sistema.</small>
    </div>

    @if (admin){
        <div class="col-md-6 text-end">
            <button class="btn btn-success" [routerLink]="['/users/create']">
                <i class="bi bi-plus-circle-fill me-1"></i> Nuevo Usuario
            </button>
        </div>
    }
</div>

    <div class="card p-3 mb-4 shadow-sm">
        <div class="row align-items-center">
            <div class="col-md-10">
                <div class="input-group">
                    <span class="input-group-text bg-light text-muted"><i class="bi bi-search"></i></span>
                    <input 
                        type="text"
                        class="form-control"
                        placeholder="Buscar por Nombre de Usuario..."
                        [(ngModel)]="nameSearch"
                        (keyup.enter)="searchUsers()"
                    >
                </div>
            </div>
            <div class="col-md-2 d-grid">
                <button class="btn btn-outline-primary" (click)="searchUsers()">
                    Buscar
                </button>
            </div>
        </div>
    </div>

@if (users.length > 0){
<div class="table-responsive">
    <table class="table table-striped table-hover align-middle border">
        <thead class="table-primary text-center">
            <tr>
                <th>
                    Id
                </th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Correo</th>
                <th>Nombre de Usuario</th>
                @if (admin){
                    <th>Eliminar</th>
                    <th>Actualizar</th>
                }
            </tr>
        </thead>
        <tbody>
            @for(user of users; track $index){
                <tr>
                    <td class="text-muted">{{ user.idUser }}</td>
                    <td class="text-center">{{ user.name }}</td>
                    <td class="text-center">{{ user.lastName }}</td>
                    <td class="text-center">{{ user.email }}</td>
                    <td class="text-center">{{ user.username }}</td>
                    @if (admin){
                        <td>    
                            <button class="btn btn-warning btn-sm"
                                (click)="OnSelectedUser(user)">
                                <i class="bi bi-pencil-square"></i>  
                                Actualizar
                            </button>
                        </td>
                        <td>
                            <button
                                class="btn btn-danger btn-sm"
                                (click)="OnRemoveUser(user.idUser)"
                                >
                                <i class="bi bi-trash-fill"></i>  
                                    Eliminar
                                </button>
                        </td>
                    }   
                </tr>
            }
        </tbody>
    </table>
</div>
}  @else {
    <div class="alert alert-warning text-center">
        <i class="bi bi-exclamation-triangle-fill me-2"></i> No hay registros de Usuarios en el sistema.
    </div>
}